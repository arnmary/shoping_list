// ðŸ”¹ Ð¢Ð¸Ð¿ Ð´Ð»Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸ ÑÐ»Ñ–Ð² Ñƒ JSON
interface WordsData {
  [key: string]: string[];
}

// ðŸ”¹ Ð†Ð¼Ð¿Ð¾Ñ€Ñ‚ÑƒÑ”Ð¼Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ñ– Ð¼Ð¾Ð´ÑƒÐ»Ñ–
import express from "express";               // Express â€” Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€Ðº Ð´Ð»Ñ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°
import cors from "cors";                     // CORS â€” Ð´Ð»Ñ Ð´Ð¾Ð·Ð²Ð¾Ð»Ñƒ Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð² Ð· Ñ–Ð½ÑˆÐ¸Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð²
import wordsDataJson from "../data/words.json"; // Ð†Ð¼Ð¿Ð¾Ñ€Ñ‚ÑƒÑ”Ð¼Ð¾ JSON Ñ–Ð· Ð¿Ñ–Ð´ÐºÐ°Ð·ÐºÐ°Ð¼Ð¸ Ð½Ð° Ñ€Ñ–Ð·Ð½Ð¸Ñ… Ð¼Ð¾Ð²Ð°Ñ…

// ðŸ”¹ ÐŸÑ€Ð¸Ð²Ð¾Ð´Ð¸Ð¼Ð¾ JSON Ð´Ð¾ Ñ‚Ð¸Ð¿Ñƒ WordsData
const wordsData = wordsDataJson as WordsData;

// ðŸ”¹ Ð†Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·ÑƒÑ”Ð¼Ð¾ Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº Express
const app = express();
const port = 3000; // ÐŸÐ¾Ñ€Ñ‚, Ð½Ð° ÑÐºÐ¾Ð¼Ñƒ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚Ð¸Ð¼ÐµÑ‚ÑŒÑÑ ÑÐµÑ€Ð²ÐµÑ€

// ðŸ”¹ Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ ÐºÑ€Ð¾Ñ-Ð´Ð¾Ð¼ÐµÐ½Ð½Ñ– Ð·Ð°Ð¿Ð¸Ñ‚Ð¸
app.use(cors());

/**
 * ðŸ”¹ Ð Ð¾ÑƒÑ‚ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¿Ñ–Ð´ÐºÐ°Ð·Ð¾Ðº.
 * ÐžÑ‡Ñ–ÐºÑƒÑ” Ð´Ð²Ð° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸:
 *  - query: Ñ‚ÐµÐºÑÑ‚, ÑÐºÐ¸Ð¹ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡
 *  - lang: Ð¼Ð¾Ð²Ð° (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, 'uk', 'en', 'pl', 'ru')
 */
app.get("/api/suggestions", (req, res) => {
  const query = (req.query.query as string)?.toLowerCase() || ""; // ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ”Ð¼Ð¾ Ñ‚ÐµÐºÑÑ‚ Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ
  const lang = (req.query.lang as string) || "uk";                // ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ”Ð¼Ð¾ Ð¼Ð¾Ð²Ñƒ Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ (Ð·Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ â€” 'uk')

  const langWords = wordsData[lang] || []; // Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑÐ»Ñ–Ð² Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð½Ð¾Ñ— Ð¼Ð¾Ð²Ð¸
  const result = langWords.filter((word: string) =>
    word.toLowerCase().startsWith(query)
  ); // Ð¤Ñ–Ð»ÑŒÑ‚Ñ€ÑƒÑ”Ð¼Ð¾ ÑÐ»Ð¾Ð²Ð° Ð·Ð° Ð²Ð²ÐµÐ´ÐµÐ½Ð¸Ð¼ Ð·Ð°Ð¿Ð¸Ñ‚Ð¾Ð¼

  res.json(result); // ÐŸÐ¾Ð²ÐµÑ€Ñ‚Ð°Ñ”Ð¼Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON
});

// ðŸ”¹ Ð—Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ð¼Ð¾ ÑÐµÑ€Ð²ÐµÑ€
app.listen(port, () => {
  console.log(`âœ… Ð¡ÐµÑ€Ð²ÐµÑ€ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð½Ð° http://localhost:${port}`);
});






